<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>관리자 페이지</title>
<style>
body{font-family:Arial;padding:30px;background:#f5f5f5;}
h2{margin-top:40px;}
input{width:100%;height:36px;margin-bottom:6px;padding:0 8px;}
button{height:36px;padding:0 12px;background:#87CEEB;color:#fff;border:none;border-radius:6px;cursor:pointer;}
.section{margin-bottom:30px;}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;}
.card{background:#fff;padding:10px;border:1px solid #ddd;border-radius:8px;position:relative;}
.delete-btn{position:absolute;top:6px;right:6px;background:#ff5c5c;height:24px;font-size:12px;}
.save-btn{width:200px;margin:40px auto;display:block;height:45px;}
</style>
</head>
<body>

<h1>관리자 페이지</h1>

<div class="section">
<h2>상단 배너</h2>
<input id="bannerImg" placeholder="배너 이미지 URL">
<input id="bannerLink" placeholder="배너 링크">
</div>

<div class="section">
<h2>소유자 & SNS 관리</h2>
<input id="ownerName" placeholder="소유자 이름">
<input id="instagram" placeholder="Instagram 링크">
<input id="youtube" placeholder="YouTube 링크">
<input id="facebook" placeholder="Facebook 링크">
<input id="twitter" placeholder="X(트위터) 링크">
</div>

<button class="save-btn" onclick="saveAll()">저장하기</button>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="supabase.js"></script>

<script>
async function loadData(){
  const { data } = await supabaseClient.from("site_settings").select("*").limit(1);
  if(data && data.length>0){
    const s=data[0];
    bannerImg.value=s.banner_img||"";
    bannerLink.value=s.banner_link||"";
    ownerName.value=s.owner_name||"";
    instagram.value=s.instagram||"";
    youtube.value=s.youtube||"";
    facebook.value=s.facebook||"";
    twitter.value=s.twitter||"";
  }
}

async function saveAll(){
  await supabaseClient.from("site_settings").upsert([{
    id:1,
    banner_img:bannerImg.value.trim(),
    banner_link:bannerLink.value.trim(),
    owner_name:ownerName.value.trim(),
    instagram:instagram.value.trim(),
    youtube:youtube.value.trim(),
    facebook:facebook.value.trim(),
    twitter:twitter.value.trim()
  }]);

  alert("저장 완료 ✅");
}

loadData();
</script>

</body>
</html>